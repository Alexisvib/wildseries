{% extends 'base.html.twig' %}

{% block title %}Episode{% endblock %}

{% form_theme form 'bootstrap_4_layout.html.twig' %}

{% block body %}
    <h1>Episode</h1>

    <table class="table">
        <tbody>
            <tr>
                <th>Title</th>
                <td>{{ episode.title }}</td>
            </tr>
            <tr>
                <th>Number</th>
                <td>{{ episode.number }}</td>
            </tr>
            <tr>
                <th>Synopsis</th>
                <td>{{ episode.synopsis }}</td>
            </tr>
        </tbody>
    </table>



    <br>

    <a href="{{ path('episode_edit', {'slug': episode.slug}) }}" class="btn btn-primary">edit episode</a>
    <br>    <br>
    {{ include('episode/_delete_form.html.twig') }}
    <br>    <br>     <br>    <br>
    <h3> Commentaire de nos utilisateurs </h3>
    {% for comment in episode.comments | sort((a, b) => a.createdAt > b.createdAt) %}
        <div class="row">
            <div class="col-4">
                <h4>{{ comment.author.email}} :  {{ comment.rate }}/5 </h4>
                <h5>Commentaire publi√© le {{ comment.createdAt|date("d/m/Y H:i:s") }}</h5>
                <p>{{ comment.comment }}</p>
            </div>
            <div class="col-4">
                {{ include('episode/_delete_Commentform.html.twig') }}
            </div>
        </div>
    {% endfor %}
    {% if app.user %}
    <h1> Laisser un commentaire : </h1>
    <div class="container-fluid">
    {{ form_start(form) }}
        <div class="row">
            <div class="col-4">
            {{ form_widget(form) }}
                <input class="btn btn-primary" type="submit" value="envoyer le commentaire">
            </div>

        </div>

    {{ form_end(form) }}

    {% endif %}

    <a href="{{ path('episode_index') }}">back to list</a>

    </div>
{% endblock %}
